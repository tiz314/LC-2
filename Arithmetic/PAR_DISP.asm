; Conteggio numero di uni in una stringa a 16bit
	.ORIG	x3000
	LD	R0,NUM
	JSR	PAR_DISP
END	BRNZP	END

NUM	.FILL	b0011100011011100

; inizio subp
PAR_DISP
	ST	R2,BK2
	ST	R3,BK3
	ST	R4,BK4

	AND	R4,R4,#0

	AND	R2,R2,#0
	ADD	R2,R2,#1
	
CHECK	AND	R3,R2,R0
	BRZ	CONT
	ADD	R4,R4,#1
CONT	ADD	R2,R2,R2
	BRN	FINE
	BRNZP	CHECK
FINE	AND	R4,R4,#1
	BRZ	PARI
	AND	R1,R1,#0
	BRNZP	RESTORE

PARI	AND	R1,R1,#0
	ADD	R1,R1,#1
	BRNZP 	RESTORE

RESTORE	LD	R2,BK2
	LD	R3,BK3
	LD	R4,BK4
	RET
	

		

BK2	.BLKW	1
BK3	.BLKW	1
BK4	.BLKW	1

; fine subp


	.END