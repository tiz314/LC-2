; Conversione da cp2 a modsegno
	.ORIG	x3000
	LEA	R0,A
	JSR	CONV_MOD_SEGNO
END	BRNZP	END


A	.FILL	xFFFF
	.FILL	x0015
	.FILL	xFFF9
	.FILL	x002A
	.FILL	x0012
	.FILL	0

; inizio subp

CONV_MOD_SEGNO
	ST	R1,BK1
	ST	R2,BK2

CHECK	LDR	R1,R0,#0
	BRZ	FINE
	BRP	CONT
	NOT	R1,R1
	ADD	R1,R1,#1
	LD	R2,CONV
	ADD	R1,R1,R2
	STR	R1,R0,#0

CONT	ADD	R0,R0,#1
	BRNZP	CHECK	
	
FINE	LD	R1,BK1
	LD	R2,BK2
	RET

BK1	.BLKW	1
BK2	.BLKW	1
CONV	.FILL	b1000000000000000
; fine subp

	.END