; Conta numeri minori, uguali o maggiori a riferimento
	.ORIG	x3000
	LEA	R0,A
	LD	R1,NUM
	JSR	CONTA_MIN_UGU_MAG
END	BRNZP	END

A	.FILL	112
	.FILL	-27
	.FILL	-12
	.FILL	-20
	.FILL	-12
	.FILL	-15
	.FILL	0
NUM	.FILL	-12

; inizio subp


CONTA_MIN_UGU_MAG
	ST	R3,BK3
	ST	R4,BK4
	ST	R5,BK5
	
	AND	R3,R3,#0
	AND	R4,R4,#0
	AND	R5,R5,#0
	
CHECK	LDR	R2,R0,#0
	BRZ	FINE
	
	ADD	R1,R1,#0
	BRZP	POS	
; Qui negativo
	ADD	R2,R2,#0
	BRP	MAG
	NOT	R2,R2
	ADD	R2,R2,#1
	ADD	R2,R2,R1
	BRZ	UGU
	BRP	MIN
	BRN	MAG	

POS	ADD	R2,R2,#0
	BRN	MAG
	NOT	R2,R2
	ADD	R2,R2,#1
	ADD	R2,R2,R1
	BRZ	UGU
	BRN	MAG
	BRP	MIN

MAG	ADD	R3,R3,#1
	BRNZP	CONT

UGU	ADD	R4,R4,#1
	BRNZP	CONT

MIN	ADD	R5,R5,#1

CONT	ADD	R0,R0,#1
	BRNZP	CHECK

FINE	ADD	R0,R5,#0
	ADD	R1,R4,#0
	ADD	R2,R3,#0
	LD	R3,BK3
	LD	R4,BK4
	LD	R5,BK5
	RET

BK3	.BLKW	1
BK4	.BLKW	1
BK5	.BLKW	1
; fine subp	

	.END