; Somma valori assoluti di due array
	.ORIG	x3000
	LEA	R0,A
	LEA	R1,B
	LEA	R2,C
	JSR	SUM_ASS_ARRAY
END	BRNZP	END

A	.FILL	12
	.FILL	-12
	.FILL	32767
	.FILL	-32767
	.FILL	0
B	.FILL	3
	.FILL	-3
	.FILL	1
	.FILL	1
	.FILL	0
C	.BLKW	4

; Inizio subp
SUM_ASS_ARRAY
	ST	R3,BK3
	ST	R4,BK4
	

CHECK	LDR	R3,R0,#0
	BRZ	FINE
	BRP	LD_2
	NOT	R3,R3
	ADD	R3,R3,#1
LD_2	LDR	R4,R1,#0
	BRP	SOMMA
	NOT	R4,R4
	ADD	R4,R4,#1	
SOMMA	ADD	R4,R4,R3
	STR	R4,R2,#0
	ADD	R0,R0,#1
	ADD	R1,R1,#1
	ADD	R2,R2,#1
	BRNZP	CHECK

FINE	LD	R3,BK3
	LD	R4,BK4
	RET
	

BK3	.BLKW	1
BK4	.BLKW	1
; Fine subp

	.END