	.ORIG	x3000
	LEA	R0,ARRAY
	TRAP	x22
	JSR	MAIUSC_INI
	LEA	R0,ARRAY
	TRAP	x22
FINE	BRNZP	FINE


ARRAY	.STRINGZ	"a a a a D  f"

; Inizio subroutine

MAIUSC_INI
	BRNZP	BACKUP
INIZIO	LDR	R1,R0,#0
	BRZ	RESTORE
	LD	R2,MIN
	ADD	R2,R2,R1
	BRN	CONTINUA
	LD	R2,MAX
	ADD	R2,R2,R1
	BRP	CONTINUA
	LD	R2,SPACE
	ADD	R1,R1,R2
	STR	R1,R0,#0
CONTINUA
	ADD	R0,R0,#1
	LDR	R1,R0,#0
	BRZ	RESTORE
	LD	R2,SPACE	
	ADD	R2,R2,R1
	BRZ	NUOVO
	BRNZP 	CONTINUA
NUOVO	ADD	R0,R0,#1
	BRNZP	INIZIO


BACKUP	ST	R1,BACK1
	ST	R2,BACK2
	BRNZP	INIZIO

RESTORE	LD	R1,BACK1
	LD	R2,BACK2
	RET
	

BACK1	.BLKW	1
BACK2	.BLKW	1

SPACE	.FILL	-32
MAX	.FILL	-122
MIN	.FILL	-97

; Fine subroutine


	.END